#!/usr/bin/env bash

udkig(){
i=0 
nmcli -f SSID,BARS,SIGNAL,ACTIVE -m multiline d w | { while read line; do 
      if [[ "$line" =~ "SSID:"* ]]; then
        ssid=$(echo $line | sed 's/SSID: *//g')
#        echo $ssid
        ((i++))
        echo "$i: $ssid"
        array+=("${ssid}")
      fi
    echo $line
  done
  echo
  read -p "VÃ†LG FORBINDELSE (1-$i) " input </dev/tty
#echo ${array[((input-1))]}
ssid=${array[((input-1))]}
#echo "VALGTE: $ssid"
read -p "ADGANGSKODE TIL $ssid " wpa </dev/tty
nmcli d wifi c "$ssid" password "$wpa"
}
}
udkig
